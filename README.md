# tech-task-for-interview

## Как запустить

Нужно выполнить две команды, каждую в своём терминале:

### Запуск `backend`

```bash
cd ./backend && npm run dev
```

### Запуск `frontend`

```bash
cd ./frontend && npm run dev
```

### Как тестировать

По умолчанию, будет доступно по ссылке http://localhost:5173/

1. Открыть во вкладке браузера и зайти/зарегистрироваться под любым пользователем, который не admin и не Никита
2. Открыть в другом браузере (или в приватном режиме) и зайти/зарегистрироваться под пользователем admin
3. Под пользователем admin создать новый раунд
4. В другой вкладке, у другого пользователя сразу должен появиться этот новый раунд
5. Когда время подойдёт и раунд станет активным, можно будет кликать: клики всех пользователей обновляются (почти) в реальном времени
6. Можно насоздавать много раундов, перезагрузить страницу и заценить прелоадер при загрузке раундов

## Структура проекта

* `./backend` - Только код обсуживающий серверную часть приложения
* `./frontend` - Только код обсуживающий клиентскую часть приложения
* `./modules` - Мои личные библиотеки, которые _пока что_ не выложены в `npm`. Как будут выложены, подключу их через `dependencies`
* `./*` - На верхнем уровне shared-файлы которые могут быть использованы в `./backend` и `./frontend`

## Описание директорий

### `./backend`

Реализация серверной части на `fastify` + `prisma`

### `./frontend` - Work In Progress

Реализация клиентской части на `React` + `EventSignal`

**В процессе**

### `./bash`

Вспомогательные скрипты на bash

### `./api`

* `./api/request` - Обёртка вокруг `fetch` с обновлениями `JWT` при необходимости
* `./api/methods` - Реализует прослойку для **известных** HTTP-запросов
* `./api/routers` - Описание **известных** HTTP-запросов, в том числе для использования при регистрации в `fastify`
* `./api/SSEClient` - Реализация SSE (Server Side Events) клиента поверх `fetch`
* `./api/SSEChannels` - Хранилище **известных** SSE-каналов

### `./logic`

Общая логика работы приложения. Файлы используются как на фронтенде, так и на бекенде.

* `./logic/mainProcessAbortController` - главный инстанс `AbortController` для всего приложения. Помогает закрывать
активные асинхронные процессы и очищать таймеры/интервалы, в том числе в хуке `afterAll` тестов.
* `./logic/mainProcessChangeDataCapture` - главный инстанс `EventEmitterX` для получения обновления об изменениях
объектов в системе:
  * (todo: пока не реализовано) На бекенде подключается к `Redis` для передачи событий между разными нодами
  * На фронтенде и в тестах, открывает SSE-каналы для получения обновления
* `./logic/mainProcessJTWStorage` - главная стора для хранение я JWT-токенов.
  * На фронтенде, обеспечивает загрузку и сохранение в `localStorage`
* `./logic/*Model` - заготовки для будущей реализации моделек для объектов системы

### `./modules`

Мои личные библиотеки, которые _пока что_ не выложены в `npm`. Как будут выложены, подключу их через `dependencies`

### `./polyfills`

Только необходимые полифилы. Моя реализация, адаптированые из `core-js`, тесты на них есть, но не в этом проекте.

### `./type_guards`

Коллекия необходимых TypeScript `Type Guards`

### `./utils`

Коллекия необходимых утилитарных функций

### `./types`

Дополнительные общие типы для TypeScript

### `./tests`

Тесты

### `./tests_utils`

Утилиты для тестов
